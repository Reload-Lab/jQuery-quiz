!function(i){var t={start:"Start",prev:"Back",next:"Forward",results:"Go to results",restart:"Back to the top",error:"Error",errmsg:["Please choose an answer.","Some questions have not been answered. Please, back to the top to answer all questions."]};i.quiz=i.fn.quiz=function(e){var a,n,s,o={},r=0,u=0,d=0,l="object"==typeof this?this.first():null,c="quiz_container",f="quiz_answer",v="quiz_modal",p="quiz_mdltitle",h="quiz_progress",q="quiz_start",m="quiz_prev",z="quiz_next",b="quiz_results",g="quiz_restart",w="quiz_restart_modal",_="quiz_intro",y="quiz_flex",x="quiz_flex-fill",k="quiz_num",J="quiz_radio-button",S="quiz_alert",T="quiz_alert-success",N="quiz_alert-fail",O="quiz_btn",D="quiz_btn",E="quiz_btn-group",I="quiz_response",j="quiz_progress",B="quiz_progress-bar",C='<i class="fa fa-play" aria-hidden="true"></i>',R='<i class="fa fa-step-backward" aria-hidden="true"></i>',A='<i class="fa fa-step-forward" aria-hidden="true"></i>',F='<i class="fa fa-repeat" aria-hidden="true"></i>',P='<i class="fa fa-thumbs-up" aria-hidden="true"></i>',$='<i class="fa fa-thumbs-down" aria-hidden="true"></i>',G={quizJson:null,cookieExpire:3600,onResults:function(i,t){}},Q={localization:function(e){"object"==typeof e&&i.extend(t,e)}};if("string"==typeof e){if(Q[e])return Q[e].apply(this,Array.prototype.slice.call(arguments,1));e={quizJson:e}}if("object"==typeof e&&!e.quizJson){var U=l.data("quizJson");"string"==typeof U&&(e.quizJson=U)}function V(){i(document).modal?o.quizJson?(i('<div id="'+c+'"></div>').appendTo(l),i('<div id="'+h+'"></div>').appendTo(l).addClass(j),i.getJSON(o.quizJson+"?_="+(new Date).getTime()).done((function(i,t,e){if(a=i[0].questions,n=i[0].params,r=a.length,window.location.hash){var s=window.location.hash.substr(1).split("=")[1];/^\+?(0|[1-9]\d*)$/.test(s)?K(s-1):"results"==s&&L()}else H()})).fail((function(i,t,e){console.error("Fail"),console.error("Error "+t),console.error("Incoming Text "+i.responseText)}))):console.error("Set url to quiz json file"):console.error("Bootstrap 4 is required")}function H(){var t=Y();t&&(s=null,window.location.hash="",i("#"+c).html(t),ti(!1))}function K(t){var e=M(t);if(e){t=e[0]+1;s=t,window.location.hash="step="+t,i("#"+c).html(Z(e)),ti(t)}}function L(t){s="results",window.location.hash="step=results",i("#"+c).html(ii()),ti(!1),"function"==typeof o.onResults&&o.onResults.apply(i("#"+c),[u,r])}function M(t){var e;return i.each(a,(function(i,a){i==t&&(e=[i,a])})),e}function W(e){var n,s=JSON.parse(ni("response")),r=!0;return s||(s={},ai("response",JSON.stringify(s),o.cookieExpire)),i.each(a,(function(i,a){return n="question"+i,i<e&&!s[n]?(ei(t.errmsg[1],!0),r=!1,!1):i!=e||s[n]?void 0:(ei(t.errmsg[0],!1),r=!1,!1)})),r}function X(t){var e=!0;return i.each(a,(function(i,a){i>t&&(e=!1)})),e}function Y(){if(1==n.intro)return'<div class="'+_+'">'+n.intromessage+'<button id="'+q+'" class="'+O+'">'+t.start+C+"</button></div>";K(d)}function Z(e){var a="question"+e[0],n=JSON.parse(ni("response")),s='<div class="'+y+'">';return s+='<div class="'+k+'">'+(e[0]+1)+".</div>",s+='<div class="'+x+'">',s+="<h2>"+e[1].question+"</h2>",e[1].description&&(s+="<p>"+e[1].description+"</p>"),i.each(e[1].answers,(function(i,t){var o="";n&&n[a]&&n[a]==i&&(o=" checked"),s+='<div class="'+J+'"><input type="radio" id="'+f+"-"+i+'" name="question'+e[0]+'" value="'+i+'" data-quiz-name="question'+e[0]+'" data-quiz-value="'+i+'"'+o+'><label for="'+f+"-"+i+'"><span></span> '+t.answer+"</label></div>"})),s+="</div>",s+="</div>",X(e[0])?s+='<div class="'+E+'" role="group"><button id="'+m+'" class="'+D+'" data-quiz-id="'+e[0]+'">'+R+t.prev+'</button><button id="'+b+'" class="'+D+'" data-quiz-id="'+e[0]+'">'+t.results+A+"</button></div>":s+='<div class="'+E+'" role="group"><button id="'+m+'" class="'+D+'" data-quiz-id="'+e[0]+'">'+R+t.prev+'</button><button id="'+z+'" class="'+D+'" data-quiz-id="'+e[0]+'">'+t.next+A+"</button></div>",s}function ii(){var e="";u=0;var n=JSON.parse(ni("response"));return i.each(a,(function(t,a){var s="question"+t;e+='<div class="'+y+'">',e+='<div class="'+k+'">'+(t+1)+".</div>",e+='<div class="'+x+'">',e+="<h2>"+a.question+"</h2>",a.description&&(e+="<p>"+a.description+"</p>"),i.each(a.answers,(function(i,t){n&&n[s]&&n[s]==i&&(1==t.true?(u++,e+='<div class="'+I+'"><strong>'+(i+1)+".</strong> "+t.answer+'</div><div class="'+S+" "+T+'">'+P+t.alert+"</div>"):e+='<div class="'+I+'"><strong>'+(i+1)+".</strong> "+t.answer+'</div><div class="'+S+" "+N+'">'+$+t.alert+"</div>")})),e+="</div>",e+="</div>"})),e+='<button id="'+g+'" class="'+D+'">'+F+t.restart+"</button>"}function ti(t){var e=t/r*100,a=i("#"+h).show().find("."+B);a.length||(a=i('<div class="'+B+'" role="progressbar" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100"></div>').appendTo("#"+h)),a.attr("aria-valuenow",e).css("width",e+"%").html(t+"/"+r),t||i("#"+h).hide()}function ei(e,a){var n=i("#"+v);if(n.length)n.find(".modal-body").text(e).end().find(".modal-footer").css("display",a?"flex":"none").end().modal("show");else{var s='<div id="'+v+'" class="modal fade" role="dialog" aria-hidden="true" aria-labelledby="quiz_mdltitle" tabindex="-1"><div class="modal-dialog modal-dialog-centered" role="document"><div class="modal-content">';s+='<div class="modal-header"><h5 id="'+p+'" class="modal-title">'+t.error+'</h5><button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button></div>',s+='<div class="modal-body text-danger" aria-live="polite"></div>',s+='<div class="modal-footer"><button id="'+w+'" type="button" class="'+D+'" data-dismiss="modal">'+F+t.restart+"</button></div>",s+="</div>",s+="</div>",i(s+="</div>").appendTo("body"),setTimeout((function(){ei(e,a)}),10)}}function ai(i,t,e){var a="";if(e){var n=new Date;n.setTime(n.getTime()+1e3*e),a="; expires="+n.toUTCString()}document.cookie=i+"="+(t||"")+a+"; path=/"}function ni(i){for(var t=i+"=",e=document.cookie.split(";"),a=0;a<e.length;a++){for(var n=e[a];" "==n.charAt(0);)n=n.substring(1,n.length);if(0==n.indexOf(t))return n.substring(t.length,n.length)}return null}return i.extend(o,G,e),i(document).on("click","*[data-quiz-value]",(function(t){var e=JSON.parse(ni("response")),a=i(this).data("quizName"),n=i(this).data("quizValue"),s={};s[a]=""+n,i.extend(e,s),ai("response",JSON.stringify(e),o.cookieExpire)})),i(document).on("click","#"+q,(function(i){i.preventDefault(),K(d)})),i(document).on("click","#"+m,(function(t){t.preventDefault();var e=i(this).data("quizId");e-1<0?H():K(e-1)})),i(document).on("click","#"+z,(function(t){t.preventDefault();var e=i(this).data("quizId");W(e)&&K(e+1)})),i(document).on("click","#"+b,(function(t){t.preventDefault(),W(i(this).data("quizId"))&&L()})),i(document).on("click","#"+g+", #"+w,(function(i){i.preventDefault();ai("response",JSON.stringify({}),o.cookieExpire),H()})),i(window).bind("hashchange",(function(i){if(""!=window.location.hash){var t=window.location.hash.substr(1).split("=")[1];/^\+?(0|[1-9]\d*)$/.test(t)?parseInt(s)!=parseInt(t)&&K(t-1):"results"==t&&L()}else H()})),V(),this}}(jQuery);